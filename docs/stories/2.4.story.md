# Story 2.4: Apply for a Job

**Status**: Draft

**Story**

As a logged-in job seeker,
I want to apply for a job directly through the platform,
so that I can easily and efficiently submit my candidacy.

**Acceptance Criteria**

1. When viewing a job details page, a logged-in job seeker is shown a prominent "Apply" button.
2. Clicking "Apply" presents a simple application form (e.g., fields for name, email, and a resume upload).
3. Upon submission, an application record is created, linking the job seeker's profile, the job, and the submitted information.
4. After applying, the button's state changes to "Applied" to prevent duplicate submissions.
5. A user who is not logged in is prompted to log in or register when they click the "Apply" button.

**Tasks / Subtasks**

- [ ] **Task 1: Create Application Entity and Database Schema (AC: 3)**
  - [ ] Subtask 1.1: Create `Application` entity in `apps/api/src/main/java/com/recruitify/entities/Application.java` with fields: `id`, `jobSeekerId`, `jobPostingId`, `firstName`, `lastName`, `email`, `phone`, `resumeUrl`, `coverLetter`, `status`, `appliedAt`, `updatedAt`. [Source: AC 2, 3]
  - [ ] Subtask 1.2: Add JPA annotations for entity mapping and relationships. [Source: architecture/11-backend-architecture.md]
  - [ ] Subtask 1.3: Create database migration for `applications` table. [Source: architecture/9-database-schema.md]
  - [ ] Subtask 1.4: Add foreign key constraints for `job_seeker_id` (references users) and `job_posting_id` (references job_postings). [Source: architecture/9-database-schema.md]
  - [ ] Subtask 1.5: Add unique constraint on `(job_seeker_id, job_posting_id)` to prevent duplicate applications. [Source: AC 4]
  - [ ] Subtask 1.6: Add indexes on `job_seeker_id`, `job_posting_id`, `applied_at` for query optimization. [Source: Performance]

- [ ] **Task 2: Setup File Upload Infrastructure for Resumes (AC: 2)**
  - [ ] Subtask 2.1: Configure AWS S3 bucket for resume storage in backend application.yml. [Source: architecture/3-tech-stack.md mentions S3]
  - [ ] Subtask 2.2: Create `FileStorageService` for handling file uploads to S3. [Source: architecture/11-backend-architecture.md]
  - [ ] Subtask 2.3: Implement `uploadResume(file)` method that uploads to S3 and returns URL. [Source: AC 2]
  - [ ] Subtask 2.4: Add file validation: allowed types (PDF, DOC, DOCX), max size (5MB). [Source: Security + UX]
  - [ ] Subtask 2.5: Generate unique file names to prevent collisions (e.g., `{userId}_{timestamp}_{originalName}`). [Source: Best practice]

- [ ] **Task 3: Create Application Repository (AC: 3)**
  - [ ] Subtask 3.1: Create `ApplicationRepository` interface extending `JpaRepository<Application, UUID>`. [Source: architecture/11-backend-architecture.md]
  - [ ] Subtask 3.2: Add method `Optional<Application> findByJobSeekerIdAndJobPostingId(UUID jobSeekerId, UUID jobPostingId)`. [Source: AC 4 - check if already applied]
  - [ ] Subtask 3.3: Add method `List<Application> findByJobSeekerId(UUID jobSeekerId)` for job seeker's application history. [Source: Story 3.1 preparation]
  - [ ] Subtask 3.4: Add method `List<Application> findByJobPostingId(UUID jobPostingId)` for employer viewing applicants. [Source: Story 2.5 preparation]
  - [ ] Subtask 3.5: Add method `Long countByJobPostingId(UUID jobPostingId)` for applicant count in dashboard. [Source: Story 2.3 integration]

- [ ] **Task 4: Create Application Service (AC: 3, 4)**
  - [ ] Subtask 4.1: Create `ApplicationService` in `apps/api/src/main/java/com/recruitify/service/ApplicationService.java`. [Source: architecture/11-backend-architecture.md]
  - [ ] Subtask 4.2: Implement `submitApplication(userId, jobId, ApplicationDto, resumeFile)` method. [Source: AC 3]
  - [ ] Subtask 4.3: Verify user is JOB_SEEKER role before allowing application. [Source: Business logic]
  - [ ] Subtask 4.4: Check if user has already applied to this job (return error if duplicate). [Source: AC 4]
  - [ ] Subtask 4.5: Upload resume file to S3 using `FileStorageService`. [Source: AC 2]
  - [ ] Subtask 4.6: Create application record with `status = 'NEW'` and `appliedAt = NOW()`. [Source: AC 3]
  - [ ] Subtask 4.7: Implement `hasApplied(userId, jobId)` method to check application status. [Source: AC 4]
  - [ ] Subtask 4.8: Auto-populate name and email from user's profile if available. [Source: UX improvement]

- [ ] **Task 5: Create Application DTOs (AC: 2, 3)**
  - [ ] Subtask 5.1: Create `SubmitApplicationDto` with fields: `firstName`, `lastName`, `email`, `phone`, `coverLetter`. [Source: AC 2]
  - [ ] Subtask 5.2: Add Jakarta validation annotations to DTO fields (`@NotBlank`, `@Email`, `@Size`). [Source: architecture/15-security-and-performance.md]
  - [ ] Subtask 5.3: Create `ApplicationDto` for API responses (includes all fields including id, status, timestamps). [Source: API contract]
  - [ ] Subtask 5.4: Resume file will be sent as multipart/form-data separately from JSON DTO. [Source: File upload best practice]

- [ ] **Task 6: Create Application Controller and API Endpoints (AC: 1, 2, 3, 4, 5)**
  - [ ] Subtask 6.1: Create `ApplicationController` in `apps/api/src/main/java/com/recruitify/controller/ApplicationController.java`. [Source: architecture/11-backend-architecture.md]
  - [ ] Subtask 6.2: Implement `POST /api/v1/jobs/{jobId}/apply` endpoint (authenticated, JOB_SEEKER only). [Source: AC 3]
  - [ ] Subtask 6.3: Endpoint accepts multipart request: `@RequestPart("application") SubmitApplicationDto` and `@RequestPart("resume") MultipartFile`. [Source: AC 2]
  - [ ] Subtask 6.4: Return 201 Created with `ApplicationDto` on success. [Source: REST best practices]
  - [ ] Subtask 6.5: Return 400 Bad Request if already applied to this job. [Source: AC 4]
  - [ ] Subtask 6.6: Return 400 Bad Request for validation errors or invalid file. [Source: Validation]
  - [ ] Subtask 6.7: Implement `GET /api/v1/jobs/{jobId}/application-status` endpoint to check if user applied. [Source: AC 1, 4]
  - [ ] Subtask 6.8: Add `@PreAuthorize("hasRole('JOB_SEEKER')")` annotation. [Source: Story 2.1 RBAC patterns]

- [ ] **Task 7: Create Shared TypeScript Types for Applications (AC: 2, 3)**
  - [ ] Subtask 7.1: Create `packages/shared-types/application.ts` with type definitions. [Source: architecture/17-coding-standards.md]
  - [ ] Subtask 7.2: Define `SubmitApplicationDto` interface matching backend. [Source: AC 2]
  - [ ] Subtask 7.3: Define `Application` interface for full application object. [Source: AC 3]
  - [ ] Subtask 7.4: Define `ApplicationStatus` type: 'NEW' | 'UNDER_REVIEW' | 'INTERVIEW' | 'CLOSED'. [Source: Story 3.3 preparation]

- [ ] **Task 8: Create Frontend Application Service (AC: 2, 3)**
  - [ ] Subtask 8.1: Create `apps/web/src/services/applicationService.ts` using authenticated `apiClient`. [Source: architecture/10-frontend-architecture.md]
  - [ ] Subtask 8.2: Implement `submitApplication(jobId, data, resumeFile)` function calling `POST /api/v1/jobs/{jobId}/apply`. [Source: AC 3]
  - [ ] Subtask 8.3: Function should send multipart/form-data request with both JSON and file. [Source: AC 2]
  - [ ] Subtask 8.4: Implement `checkApplicationStatus(jobId)` function calling `GET /api/v1/jobs/{jobId}/application-status`. [Source: AC 1, 4]

- [ ] **Task 9: Create Application Form Component (AC: 2)**
  - [ ] Subtask 9.1: Create `apps/web/src/features/jobs/ApplicationForm.tsx` component. [Source: architecture/10-frontend-architecture.md]
  - [ ] Subtask 9.2: Form fields: First Name (pre-filled from profile), Last Name (pre-filled), Email (pre-filled), Phone (optional), Cover Letter (optional textarea), Resume Upload (required). [Source: AC 2]
  - [ ] Subtask 9.3: Use Ant Design `Form`, `Input`, `Input.TextArea`, `Upload` components. [Source: architecture/3-tech-stack.md]
  - [ ] Subtask 9.4: Configure `Upload` component: accept only PDF/DOC/DOCX, max 5MB, single file only. [Source: File constraints]
  - [ ] Subtask 9.5: Add form validation: required fields, email format, file size and type. [Source: AC 2]
  - [ ] Subtask 9.6: Show upload progress and success/error feedback. [Source: UX best practice]
  - [ ] Subtask 9.7: Add loading state during submission. [Source: UX best practice]

- [ ] **Task 10: Update Job Details Page with Apply Button (AC: 1, 4, 5)**
  - [ ] Subtask 10.1: Update job details page from Story 1.5 to include apply functionality. [Source: AC 1]
  - [ ] Subtask 10.2: On page load, check if user is authenticated using auth store. [Source: AC 5]
  - [ ] Subtask 10.3: If authenticated and JOB_SEEKER, call `checkApplicationStatus(jobId)` to check if already applied. [Source: AC 4]
  - [ ] Subtask 10.4: Display "Apply Now" button prominently if NOT applied yet. [Source: AC 1]
  - [ ] Subtask 10.5: Display "Applied" button (disabled) with checkmark if already applied. [Source: AC 4]
  - [ ] Subtask 10.6: If not authenticated, display "Login to Apply" button. [Source: AC 5]
  - [ ] Subtask 10.7: If user is RECRUITER, hide apply button entirely. [Source: Business logic]

- [ ] **Task 11: Create Application Modal/Page Flow (AC: 2, 5)**
  - [ ] Subtask 11.1: Create modal or drawer that opens when "Apply Now" is clicked. [Source: AC 2]
  - [ ] Subtask 11.2: Modal displays `ApplicationForm` component with job title in header. [Source: AC 2]
  - [ ] Subtask 11.3: On successful submission, close modal and update button to "Applied". [Source: AC 4]
  - [ ] Subtask 11.4: Show success message: "Application submitted successfully!" [Source: UX feedback]
  - [ ] Subtask 11.5: If not authenticated, clicking "Login to Apply" redirects to login with return URL to job page. [Source: AC 5]

- [ ] **Task 12: Handle Login Redirect After Authentication (AC: 5)**
  - [ ] Subtask 12.1: When unauthenticated user clicks "Login to Apply", save job URL as redirect target. [Source: AC 5]
  - [ ] Subtask 12.2: After successful login, redirect back to job details page. [Source: AC 5]
  - [ ] Subtask 12.3: Optionally auto-open application modal after redirect. [Source: UX flow]

- [ ] **Task 13: Update Job Summary Card to Show Application Status (AC: 4)**
  - [ ] Subtask 13.1: Update `JobListingCard` from Story 1.3 to show "Applied" badge if user has applied. [Source: AC 4]
  - [ ] Subtask 13.2: Fetch application status for displayed jobs (batch API call or include in job list response). [Source: Performance]
  - [ ] Subtask 13.3: Use Ant Design `Badge` component with green color for "Applied". [Source: Visual feedback]

- [ ] **Task 14: Update Employer Dashboard Applicant Count (Story 2.3 Integration)**
  - [ ] Subtask 14.1: Update `JobService.getMyJobs()` to include actual applicant count from applications table. [Source: Story 2.3 AC 3]
  - [ ] Subtask 14.2: Use `ApplicationRepository.countByJobPostingId()` to get count. [Source: Story 2.3 integration]
  - [ ] Subtask 14.3: Update `JobSummaryDto` to return real applicant counts instead of 0. [Source: Story 2.3 completion]

- [ ] **Task 15: Implement Backend Unit Tests (AC: 3, 4)**
  - [ ] Subtask 15.1: Write unit test for `ApplicationService.submitApplication()` to verify application creation. [Source: architecture/16-testing-strategy.md]
  - [ ] Subtask 15.2: Write unit test to verify duplicate application prevention (should return error). [Source: AC 4]
  - [ ] Subtask 15.3: Write unit test for `FileStorageService.uploadResume()` file upload. [Source: AC 2]
  - [ ] Subtask 15.4: Write unit test to verify only JOB_SEEKER can apply. [Source: Business logic]
  - [ ] Subtask 15.5: Place tests in `apps/api/src/test/java/com/recruitify/service/ApplicationServiceTest.java`. [Source: architecture/16-testing-strategy.md]

- [ ] **Task 16: Implement Backend Integration Tests (AC: 2, 3, 4, 5)**
  - [ ] Subtask 16.1: Write integration test for `POST /api/v1/jobs/{jobId}/apply` endpoint with file upload. [Source: architecture/16-testing-strategy.md]
  - [ ] Subtask 16.2: Verify 201 Created response with correct application data. [Source: AC 3]
  - [ ] Subtask 16.3: Verify 400 Bad Request when applying twice to same job. [Source: AC 4]
  - [ ] Subtask 16.4: Verify 401 Unauthorized when not authenticated. [Source: AC 5]
  - [ ] Subtask 16.5: Verify 403 Forbidden when RECRUITER tries to apply. [Source: Business logic]
  - [ ] Subtask 16.6: Verify file validation (wrong type, too large). [Source: Security]
  - [ ] Subtask 16.7: Verify `GET /api/v1/jobs/{jobId}/application-status` endpoint. [Source: AC 4]
  - [ ] Subtask 16.8: Place tests in `apps/api/src/test/java/com/recruitify/controller/ApplicationControllerIntegrationTest.java`. [Source: architecture/16-testing-strategy.md]

- [ ] **Task 17: Implement Frontend Component Tests (AC: 2)**
  - [ ] Subtask 17.1: Write unit test for `ApplicationForm` to verify all fields render. [Source: architecture/16-testing-strategy.md]
  - [ ] Subtask 17.2: Write unit test for form validation (required fields, file upload). [Source: AC 2]
  - [ ] Subtask 17.3: Write unit test for successful form submission. [Source: AC 2]
  - [ ] Subtask 17.4: Place test co-located: `ApplicationForm.test.tsx`. [Source: architecture/16-testing-strategy.md]

- [ ] **Task 18: Implement E2E Tests (AC: 1, 2, 3, 4, 5)**
  - [ ] Subtask 18.1: Create Playwright E2E test for authenticated job seeker applying to a job. [Source: architecture/16-testing-strategy.md]
  - [ ] Subtask 18.2: Test "Apply Now" button is visible on job details page. [Source: AC 1]
  - [ ] Subtask 18.3: Test clicking "Apply Now" opens application form. [Source: AC 2]
  - [ ] Subtask 18.4: Test filling form and uploading resume successfully. [Source: AC 2]
  - [ ] Subtask 18.5: Test button changes to "Applied" after submission. [Source: AC 4]
  - [ ] Subtask 18.6: Test trying to apply again shows "Applied" button (disabled). [Source: AC 4]
  - [ ] Subtask 18.7: Test unauthenticated user sees "Login to Apply" and is redirected to login. [Source: AC 5]
  - [ ] Subtask 18.8: Test after login, user returns to job page and can apply. [Source: AC 5]
  - [ ] Subtask 18.9: Place tests in `e2e/job-application.spec.ts`. [Source: architecture/16-testing-strategy.md]

**Dev Notes**

**Previous Story Dependencies**: This story depends on:
- **Story 1.2** (Registration & Login): Authentication system for AC 5 (login requirement)
- **Story 1.5** (View Job Details): The job details page where the Apply button will appear (AC 1)
- **Story 2.1** (Employer Registration): Role-based system distinguishing JOB_SEEKER from RECRUITER
- **Story 2.3** (Employer Dashboard): This story completes the applicant count feature from Story 2.3 AC 3

**File Storage Strategy**: This story introduces file upload functionality for the first time in the platform. AWS S3 is mentioned in the architecture docs (architecture/4-data-models.md mentions avatarUrl stored in S3). We'll use S3 for resume storage with the following conventions:
- Bucket: `recruitify-resumes-{environment}` (e.g., `recruitify-resumes-prod`)
- Path structure: `{userId}/{jobId}/{timestamp}-{originalFilename}`
- Public read access: No (resumes are private, accessed via signed URLs)

**Data Models**:

*   **Application Model (New)**:
    *   `id`: `string` (UUID) - Primary key
    *   `jobSeekerId`: `string` (UUID, FK to User with JOB_SEEKER role) - The applicant
    *   `jobPostingId`: `string` (UUID, FK to JobPosting) - The job being applied to
    *   `firstName`: `string` - Applicant's first name
    *   `lastName`: `string` - Applicant's last name
    *   `email`: `string` - Applicant's email
    *   `phone`: `string` - Applicant's phone number (optional)
    *   `resumeUrl`: `string` - S3 URL to resume file
    *   `coverLetter`: `string` - Cover letter text (optional)
    *   `status`: `'NEW' | 'UNDER_REVIEW' | 'INTERVIEW' | 'CLOSED'` - Application status
    *   `appliedAt`: `Date` - When application was submitted
    *   `updatedAt`: `Date` - Last status update
    *   [Source: AC 2, 3 and Story 3.3 status management requirements]

**TypeScript Interfaces**:

```typescript
// In packages/shared-types/application.ts
export type ApplicationStatus =
  | 'NEW'
  | 'UNDER_REVIEW'
  | 'INTERVIEW'
  | 'CLOSED';

export interface SubmitApplicationDto {
  firstName: string;
  lastName: string;
  email: string;
  phone?: string;
  coverLetter?: string;
  // Resume file sent separately as multipart form data
}

export interface Application {
  id: string;
  jobSeekerId: string;
  jobPostingId: string;
  firstName: string;
  lastName: string;
  email: string;
  phone?: string;
  resumeUrl: string;
  coverLetter?: string;
  status: ApplicationStatus;
  appliedAt: Date;
  updatedAt: Date;
}

export interface ApplicationStatusResponse {
  hasApplied: boolean;
  applicationId?: string;
  appliedAt?: Date;
}
```

**API Specifications**:

*   **POST /api/v1/jobs/{jobId}/apply**:
    *   Submits job application with resume upload
    *   Requires authentication + JOB_SEEKER role
    *   Content-Type: `multipart/form-data`
    *   Request parts:
      - `application` (JSON): `SubmitApplicationDto`
      - `resume` (file): PDF/DOC/DOCX, max 5MB
    *   Returns 201 Created with `Application` object
    *   Returns 400 Bad Request if already applied, validation errors, or invalid file
    *   Returns 401 Unauthorized if not authenticated
    *   Returns 403 Forbidden if not JOB_SEEKER
    *   [Source: AC 2, 3, 4, 5]

*   **GET /api/v1/jobs/{jobId}/application-status**:
    *   Checks if authenticated user has applied to this job
    *   Requires authentication
    *   Returns 200 OK with `ApplicationStatusResponse`
    *   Returns 401 Unauthorized if not authenticated
    *   [Source: AC 1, 4]

**Database Schema**:

```sql
-- Applications table
CREATE TABLE applications (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    job_seeker_id UUID NOT NULL REFERENCES users(id) ON DELETE CASCADE,
    job_posting_id UUID NOT NULL REFERENCES job_postings(id) ON DELETE CASCADE,
    first_name VARCHAR(255) NOT NULL,
    last_name VARCHAR(255) NOT NULL,
    email VARCHAR(255) NOT NULL,
    phone VARCHAR(50),
    resume_url VARCHAR(500) NOT NULL,
    cover_letter TEXT,
    status VARCHAR(50) NOT NULL DEFAULT 'NEW' CHECK (status IN ('NEW', 'UNDER_REVIEW', 'INTERVIEW', 'CLOSED')),
    applied_at TIMESTAMPTZ NOT NULL DEFAULT NOW(),
    updated_at TIMESTAMPTZ NOT NULL DEFAULT NOW(),
    UNIQUE (job_seeker_id, job_posting_id)  -- Prevent duplicate applications
);

-- Indexes for performance
CREATE INDEX idx_applications_job_seeker ON applications (job_seeker_id);
CREATE INDEX idx_applications_job_posting ON applications (job_posting_id);
CREATE INDEX idx_applications_status ON applications (status);
CREATE INDEX idx_applications_applied_at ON applications (applied_at DESC);
```
[Source: AC 3, 4 and architecture/9-database-schema.md patterns]

**Component Specifications**:

*   **ApplicationForm**: Form component with all application fields. Uses Ant Design `Upload` component with custom request handler for S3 upload. Includes drag-and-drop file upload area. Pre-fills user data from profile. [Source: architecture/10-frontend-architecture.md and AC 2]

**File Locations**:

*   **Backend**:
    *   Entity: `apps/api/src/main/java/com/recruitify/entities/Application.java`
    *   Repository: `apps/api/src/main/java/com/recruitify/repository/ApplicationRepository.java`
    *   Service: `apps/api/src/main/java/com/recruitify/service/ApplicationService.java`, `FileStorageService.java`
    *   Controller: `apps/api/src/main/java/com/recruitify/controller/ApplicationController.java`
    *   DTOs: `apps/api/src/main/java/com/recruitify/dto/SubmitApplicationDto.java`, `ApplicationDto.java`
    *   Database Migration: `apps/api/src/main/resources/db/migration/V5__create_applications_table.sql`
    *   Config: Update `apps/api/src/main/resources/application.yml` with S3 configuration

*   **Frontend**:
    *   Components: `apps/web/src/features/jobs/ApplicationForm.tsx`, `ApplicationModal.tsx`
    *   Services: `apps/web/src/services/applicationService.ts`
    *   Updated: `apps/web/src/pages/jobs/[id].tsx` (job details page from Story 1.5)
    *   Updated: `apps/web/src/features/jobs/JobListingCard.tsx` (show applied status)

*   **Shared Types**: `packages/shared-types/application.ts`

**Testing Requirements**:

*   **Unit Tests:**
    *   Backend: Test `ApplicationService` methods, file upload service, duplicate prevention
    *   Frontend: Test `ApplicationForm` component, file upload validation
    *   [Source: architecture/16-testing-strategy.md]

*   **Integration Tests:**
    *   Backend: Test full application submission with multipart file upload, test all error scenarios
    *   [Source: architecture/16-testing-strategy.md]

*   **E2E Tests:**
    *   Complete application flow: View job → Click apply → Fill form → Upload resume → Submit → See "Applied" status
    *   Test login redirect flow for unauthenticated users
    *   [Source: architecture/16-testing-strategy.md]

**Technical Constraints**:

*   **File Upload Security**:
    *   Validate file type on both frontend and backend (MIME type validation)
    *   Enforce file size limit (5MB max)
    *   Scan uploaded files for viruses (future enhancement, not MVP)
    *   Use signed URLs for resume access (private S3 bucket)
    *   [Source: architecture/15-security-and-performance.md]

*   **Duplicate Prevention**: Database unique constraint on `(job_seeker_id, job_posting_id)` ensures one application per job per user. Backend should also check before attempting insert. [Source: AC 4]

*   **Role Enforcement**: Only JOB_SEEKER role can apply. RECRUITER users should not see apply button. [Source: Business logic]

*   **S3 Configuration**: Requires AWS credentials and bucket configuration in application.yml. Use environment variables for production. [Source: architecture/14-deployment-architecture.md]

**Naming Conventions**:

*   React components: `PascalCase` (e.g., `ApplicationForm.tsx`)
*   Java classes: `PascalCase` (e.g., `ApplicationService.java`)
*   API endpoints: `kebab-case` (e.g., `/api/v1/jobs/{jobId}/apply`)
*   Database tables: `snake_case` (e.g., `applications`)
*   Database columns: `snake_case` (e.g., `job_seeker_id`, `applied_at`)
*   [Source: architecture/17-coding-standards.md]

**Security Considerations**:

*   **File Upload Security**: Validate MIME type, not just file extension. Store files with generated UUIDs, not original names. [Source: OWASP file upload best practices]
*   **Resume Privacy**: Resumes stored in private S3 bucket. Only job owner (recruiter) can access via signed URLs. [Source: Privacy best practice]
*   **Input Sanitization**: Sanitize cover letter to prevent XSS. [Source: architecture/15-security-and-performance.md]
*   **Rate Limiting**: Consider rate limiting application submissions to prevent spam (future enhancement). [Source: Security]

**UX Considerations**:

*   **Pre-filled Data**: Auto-populate name and email from user profile to reduce friction. [Source: UX best practice]
*   **Upload Feedback**: Show clear progress bar during file upload. Show success checkmark when uploaded. [Source: UX best practice]
*   **Button States**: "Apply Now" (blue, enabled) → "Submitting..." (loading) → "Applied" (green, disabled with checkmark). [Source: Visual feedback]
*   **Success Message**: Show clear confirmation after application submission with next steps. [Source: User confidence]
*   **Login Flow**: For unauthenticated users, clearly communicate they need to login/register to apply, then return them to the job. [Source: AC 5]
*   **Mobile Friendly**: Ensure file upload works well on mobile devices. [Source: Responsive design]

**Performance Considerations**:

*   **File Upload**: Use direct S3 upload from frontend (presigned URLs) to reduce server load (future enhancement). [Source: Performance]
*   **Application Status Check**: Cache application status checks to avoid redundant database queries. [Source: Performance]
*   **Batch Queries**: When showing multiple jobs, batch application status checks. [Source: Performance]

**AWS S3 Configuration Example**:

```yaml
# In apps/api/src/main/resources/application.yml
aws:
  s3:
    bucket-name: ${AWS_S3_BUCKET:recruitify-resumes-dev}
    region: ${AWS_REGION:us-east-1}
  access-key-id: ${AWS_ACCESS_KEY_ID}
  secret-access-key: ${AWS_SECRET_ACCESS_KEY}

file-upload:
  max-size: 5MB
  allowed-types:
    - application/pdf
    - application/msword
    - application/vnd.openxmlformats-officedocument.wordprocessingml.document
```

**Future Enhancements** (Not in MVP):
*   LinkedIn profile import to auto-fill application
*   Save application as draft
*   Application withdrawal feature
*   Email notification to employer when someone applies
*   Email confirmation to applicant after submission

**Change Log**

| Date | Version | Description | Author |
| :--- | :--- | :--- | :--- |
| 2025-11-06 | 1.0 | Initial draft based on Epic 2, Story 2.4 | Bob (SM) |

**Dev Agent Record**

**Agent Model Used**
{{agent_model_name_version}}

**Debug Log References**

**Completion Notes List**

**File List**

**QA Results**
