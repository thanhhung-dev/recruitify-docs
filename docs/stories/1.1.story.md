# Story 1.1: Project & Infrastructure Setup

**Status**: Draft

**Story**
As a Dev Team,
I want a configured project structure and CI/CD pipeline,
so that we have a stable foundation for building and deploying the application.

**Acceptance Criteria**
1.  A monorepo is initialized containing both the Next.js frontend and Spring Boot backend applications.
2.  A basic CI/CD pipeline is configured to build and run tests for both applications upon code commits.
3.  The initial PostgreSQL database schema for users and jobs is created and managed via migration files.
4.  The frontend application can successfully fetch data from a backend health-check endpoint to verify connectivity.

**Tasks / Subtasks**

- [ ] **Task 1: Initialize Monorepo and Project Structure (AC: 1)**
  - [ ] Subtask 1.1: Set up Turborepo at the root. [Source: architecture/high-level-architecture.md#repository-structure]
  - [ ] Subtask 1.2: Create `apps/web` for Next.js frontend. [Source: architecture/unified-project-structure.md#project-directory-structure]
  - [ ] Subtask 1.3: Create `apps/api` for Spring Boot backend. [Source: architecture/unified-project-structure.md#project-directory-structure]
  - [ ] Subtask 1.4: Create `packages/shared-types` for shared TypeScript types. [Source: architecture/coding-standards.md#critical-fullstack-rules]
  - [ ] Subtask 1.5: Configure basic `package.json` scripts for `npm run dev`, `npm run dev:web`, `npm run dev:api`, `npm run test`. [Source: architecture/development-workflow.md#development-commands]

- [ ] **Task 2: Configure CI/CD Pipeline (AC: 2)**
  - [ ] Subtask 2.1: Set up Vercel for frontend CI/CD. [Source: architecture/deployment-architecture.md#frontend-deployment]
  - [ ] Subtask 2.2: Set up GitHub Actions for backend CI/CD (build JAR, Docker image, push to ECR, deploy to ECS Fargate). [Source: architecture/deployment-architecture.md#backend-deployment]

- [ ] **Task 3: Implement Initial PostgreSQL Database Schema (AC: 3)**
  - [ ] Subtask 3.1: Create `users` table. [Source: architecture/database-schema.md#postgresql-database-schema]
  - [ ] Subtask 3.2: Create `user_profiles` table. [Source: architecture/database-schema.md#postgresql-database-schema]
  - [ ] Subtask 3.3: Create `work_experiences` table. [Source: architecture/database-schema.md#postgresql-database-schema]
  - [ ] Subtask 3.4: Create `education` table. [Source: architecture/database-schema.md#postgresql-database-schema]
  - [ ] Subtask 3.5: Create `skills` table. [Source: architecture/database-schema.md#postgresql-database-schema]
  - [ ] Subtask 3.6: Create `user_profile_skills` join table. [Source: architecture/database-schema.md#postgresql-database-schema]
  - [ ] Subtask 3.7: Add indexes on foreign keys. [Source: architecture/database-schema.md#postgresql-database-schema]
  - [ ] Subtask 3.8: Implement database migration strategy (e.g., Flyway or Liquibase with Spring Boot). [Source: docs/prd/epic-list.md#story-11-project-infrastructure-setup]

- [ ] **Task 4: Implement Backend Health-Check Endpoint (AC: 4)**
  - [ ] Subtask 4.1: Create a basic Spring Boot endpoint (e.g., `/api/v1/health`) that returns a 200 OK. [Source: architecture/backend-architecture.md#controllerroute-organization]
  - [ ] Subtask 4.2: Ensure the endpoint is publicly accessible (no authentication required for health check).

- [ ] **Task 5: Verify Frontend-Backend Connectivity (AC: 4)**
  - [ ] Subtask 5.1: From the Next.js frontend, make a request to the backend health-check endpoint. [Source: architecture/frontend-architecture.md#frontend-services-layer]
  - [ ] Subtask 5.2: Display a success message or log the successful connection in the frontend.

- [ ] **Task 6: Implement Unit Tests**
  - [ ] Subtask 6.1: Write unit tests for core backend components (e.g., a simple service or utility class). [Source: architecture/testing-strategy.md#the-testing-pyramid]
  - [ ] Subtask 6.2: Write unit tests for core frontend components (e.g., a simple UI component or hook). [Source: architecture/testing-strategy.md#the-testing-pyramid]

- [ ] **Task 7: Implement Integration Tests**
  - [ ] Subtask 7.1: Write an integration test for the backend health-check endpoint. [Source: architecture/testing-strategy.md#the-testing-pyramid]

- [ ] **Task 8: Implement E2E Tests**
  - [ ] Subtask 8.1: Create a basic Playwright E2E test to verify the frontend can load and the health check is successful. [Source: architecture/testing-strategy.md#the-testing-pyramid]

**Dev Notes**

**Previous Story Insights**: No previous story insights as this is the first story.

**Data Models**:
*   `User` model: `id` (UUID), `email` (string), `passwordHash` (string), `role` (`JOB_SEEKER` | `RECRUITER`), `createdAt` (Date), `updatedAt` (Date). Relationships: `User` with `JOB_SEEKER` has one `UserProfile`, `User` with `RECRUITER` has many `JobPostings`. [Source: architecture/data-models.md#model-user]
*   `UserProfile` model: `userId` (string, FK to `User`), `firstName` (string), `lastName` (string), `headline` (string), `summary` (string), `avatarUrl` (string). Relationships: Belongs to one `User`, has many `WorkExperience`, `Education`, `Skills`. [Source: architecture/data-models.md#model-userprofile]
*   `WorkExperience` model: `id` (UUID), `profileId` (string, FK to `UserProfile`), `jobTitle` (string), `companyName` (string), `location` (string), `startDate` (Date), `endDate` (Date | null), `description` (string). Relationships: Belongs to one `UserProfile`. [Source: architecture/data-models.md#model-workexperience]
*   `Education` model: `id` (UUID), `profileId` (string, FK to `UserProfile`), `schoolName` (string), `degree` (string), `fieldOfStudy` (string), `startDate` (Date), `endDate` (Date), `description` (string). Relationships: Belongs to one `UserProfile`. [Source: architecture/data-models.md#model-education]
*   `Skill` model: `id` (UUID), `name` (string, unique). Relationships: Many-to-many with `UserProfile` via `UserProfileSkills` join table. [Source: architecture/data-models.md#model-skill]

**API Specifications**:
*   Server URL: `/api/v1`. [Source: architecture/api-specification.md#rest-api-specification-openapi-30]
*   No specific endpoints for initial project setup, but future API interactions will use this base URL.

**Component Specifications**: No specific guidance found in architecture docs.

**File Locations**:
*   Monorepo structure with `recruitify-client/` and `recruitify-server/`. [Source: architecture/unified-project-structure.md#project-directory-structure]
*   Frontend: `apps/web/src/` for components, features, pages, services, stores. [Source: architecture/unified-project-structure.md#project-directory-structure]
*   Backend: `apps/api/src/main/java/com/recruitify/` for controller, service, repository, entities. [Source: architecture/unified-project-structure.md#project-directory-structure]
*   Shared types: `packages/shared-types`. [Source: architecture/coding-standards.md#critical-fullstack-rules]

**Testing Requirements**:
*   **Unit Tests:** Backend using JUnit 5 & Mockito; Frontend using Jest & React Testing Library. [Source: architecture/testing-strategy.md#the-testing-pyramid]
*   **Integration Tests:** Backend for controller-service-repository interaction; Frontend for component-hook/state interaction. [Source: architecture/testing-strategy.md#the-testing-pyramid]
*   **E2E Tests:** Playwright for end-to-end browser testing. [Source: architecture/testing-strategy.md#the-testing-pyramid]
*   Test organization: Frontend tests co-located with code (`.test.tsx`); Backend tests in `src/test/java`; E2E tests in top-level `e2e/`. [Source: architecture/testing-strategy.md#test-organization]

**Technical Constraints**:
*   **Frontend:** Next.js 14.x, TypeScript 5.x, Ant Design 5.x, Zustand 4.x, NextAuth.js. [Source: architecture/tech-stack.md#technology-stack-table]
*   **Backend:** Spring Boot 3.x, Java 17 (LTS), REST API style. [Source: architecture/tech-stack.md#technology-stack-table]
*   **Data & Storage:** PostgreSQL 15.x, Amazon S3. [Source: architecture/tech-stack.md#technology-stack-table]
*   **Auth:** NextAuth.js & Spring Security. [Source: architecture/tech-stack.md#technology-stack-table]
*   **DevOps:** Vercel & GitHub Actions for CI/CD, AWS CDK for IaC. [Source: architecture/tech-stack.md#technology-stack-table]
*   **Monorepo Tool:** Turborepo. [Source: architecture/high-level-architecture.md#repository-structure]
*   **Database Schema:** Defined in `database-schema.md`. [Source: architecture/database-schema.md#postgresql-database-schema]
*   **Authentication Flow:** JWT for stateless API, Spring Security. [Source: architecture/backend-architecture.md#authentication-and-authorization]
*   **External APIs:** Google Sign-In, LinkedIn Login (OAuth 2.0). [Source: architecture/external-apis.md#api-google-sign-in]

**Testing**
*   Test file location: Frontend (`.test.tsx` co-located), Backend (`src/test/java`), E2E (`e2e/`). [Source: architecture/testing-strategy.md#test-organization]
*   Testing frameworks: Jest & React Testing Library (FE), JUnit 5 & Mockito (BE), Playwright (E2E). [Source: architecture/testing-strategy.md#the-testing-pyramid]

**Change Log**

| Date | Version | Description | Author |
| :--- | :--- | :--- | :--- |
| 2025-10-29 | 1.0 | Initial draft based on Epic 1, Story 1.1 | Bob (SM) |

**Dev Agent Record**

**Agent Model Used**
{{agent_model_name_version}}

**Debug Log References**

**Completion Notes List**

**File List**

**QA Results**
